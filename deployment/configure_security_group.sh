#!/bin/bash
# é…ç½®AWSå®‰å…¨ç»„ä»¥æ”¯æŒIsaac Sim WebRTC Livestream

echo "ğŸ“‹ Isaac Sim WebRTCéœ€è¦çš„ç«¯å£ï¼š"
echo "  - 8899  : WebRTC HTTPæœåŠ¡å™¨"
echo "  - 8011  : WebSocketä¿¡ä»¤æœåŠ¡å™¨"
echo "  - 47998 : Nativeæµåª’ä½“ç«¯å£ï¼ˆå¤‡ç”¨ï¼‰"
echo "  - 49100 : Nativeä¿¡ä»¤ç«¯å£ï¼ˆå¤‡ç”¨ï¼‰"
echo ""
echo "ğŸ”§ è¯·åœ¨AWSæ§åˆ¶å°é…ç½®ä»¥ä¸‹å®‰å…¨ç»„è§„åˆ™ï¼š"
echo ""
echo "=================================="
echo "å…¥ç«™è§„åˆ™ (Inbound Rules):"
echo "=================================="
echo "1. Type: Custom TCP"
echo "   Port: 8899"
echo "   Source: 0.0.0.0/0 (æˆ–æ‚¨çš„IP)"
echo "   æè¿°: Isaac Sim WebRTC HTTP"
echo ""
echo "2. Type: Custom TCP"
echo "   Port: 8011"
echo "   Source: 0.0.0.0/0 (æˆ–æ‚¨çš„IP)"
echo "   æè¿°: Isaac Sim WebSocket"
echo ""
echo "3. Type: Custom TCP"
echo "   Port: 47998"
echo "   Source: 0.0.0.0/0 (æˆ–æ‚¨çš„IP)"
echo "   æè¿°: Isaac Sim Native Stream"
echo ""
echo "4. Type: Custom TCP"
echo "   Port: 49100"
echo "   Source: 0.0.0.0/0 (æˆ–æ‚¨çš„IP)"
echo "   æè¿°: Isaac Sim Native Signal"
echo ""
echo "5. Type: Custom TCP"
echo "   Port: 8000"
echo "   Source: 0.0.0.0/0 (æˆ–æ‚¨çš„IP)"
echo "   æè¿°: Teleop API"
echo ""
echo "=================================="
echo ""
echo "æˆ–è€…ä½¿ç”¨AWS CLIæ·»åŠ è§„åˆ™ï¼š"
echo ""
echo "SECURITY_GROUP_ID=<your-sg-id>"
echo ""
echo "aws ec2 authorize-security-group-ingress \\"
echo "  --group-id \$SECURITY_GROUP_ID \\"
echo "  --ip-permissions \\"
echo "  IpProtocol=tcp,FromPort=8899,ToPort=8899,IpRanges='[{CidrIp=0.0.0.0/0,Description=\"Isaac WebRTC HTTP\"}]' \\"
echo "  IpProtocol=tcp,FromPort=8011,ToPort=8011,IpRanges='[{CidrIp=0.0.0.0/0,Description=\"Isaac WebSocket\"}]' \\"
echo "  IpProtocol=tcp,FromPort=47998,ToPort=47998,IpRanges='[{CidrIp=0.0.0.0/0,Description=\"Isaac Native Stream\"}]' \\"
echo "  IpProtocol=tcp,FromPort=49100,ToPort=49100,IpRanges='[{CidrIp=0.0.0.0/0,Description=\"Isaac Native Signal\"}]'"
echo ""
echo "=================================="
echo "éªŒè¯æ­¥éª¤ï¼š"
echo "=================================="
echo ""
echo "1. åœ¨EC2ä¸Šæ£€æŸ¥ç«¯å£ç›‘å¬ï¼š"
echo "   netstat -tuln | grep -E '8899|8011|47998|49100'"
echo ""
echo "2. ä»æœ¬åœ°æµ‹è¯•è¿æ¥ï¼š"
echo "   curl http://<EC2_IP>:8899"
echo ""
echo "3. è®¿é—®WebRTCç•Œé¢ï¼š"
echo "   http://<EC2_IP>:8899/streaming/webrtc-client/"
echo ""
